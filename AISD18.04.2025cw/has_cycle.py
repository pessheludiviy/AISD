
"""
–û–¥–Ω–æ—Å–≤—è–∑–Ω—ã–π —Å–ø–∏—Å–æ–∫ ‚Äî —ç—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö, —Å–æ—Å—Ç–æ—è—â–∞—è –∏–∑ —É–∑–ª–æ–≤ (Node),
–≥–¥–µ –∫–∞–∂–¥—ã–π —É–∑–µ–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ (value) –∏ —Å—Å—ã–ª–∫—É (next) –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —É–∑–µ–ª –≤ —Å–ø–∏—Å–∫–µ.

–ü—Ä–∏–º–µ—Ä (–±–µ–∑ —Ü–∏–∫–ª–∞):
    3 ‚Üí 2 ‚Üí 0 ‚Üí -4 ‚Üí None

–ü—Ä–∏–º–µ—Ä (—Å —Ü–∏–∫–ª–æ–º):
    3 ‚Üí 2 ‚Üí 0 ‚Üí -4
         ‚Üë     ‚Üì
         ‚Üê ‚Üê ‚Üê
"""

# –ö–ª–∞—Å—Å —É–∑–ª–∞ –æ–¥–Ω–æ—Å–≤—è–∑–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞
class Node:
    def __init__(self, value):
        self.value = value
        self.next = None  # –°—Å—ã–ª–∫–∞ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —É–∑–µ–ª

    def __repr__(self):
        return f'Node({self.value})'

"""
–ó–∞–¥–∞—á–∞: –ü—Ä–µ–¥–ª–æ–∂–∏—Ç–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—É—é –ø—Ä–æ—Ü–µ–¥—É—Ä—É, –∫–æ—Ç–æ—Ä–∞—è –∑–∞ –≤—Ä–µ–º—è O(n) –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç 
–∑–∞—Ü–∏–∫–ª–∏–≤–∞–µ—Ç—Å—è –ª–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ª–∏–Ω–µ–π–Ω—ã–º —Å–ø–∏—Å–∫–æ–º –¥–ª–∏–Ω—ã n

–ê–ª–≥–æ—Ä–∏—Ç–º –§–ª–æ–π–¥–∞ ("—á–µ—Ä–µ–ø–∞—Ö–∞ –∏ –∑–∞—è—Ü"):
- –î–≤–∞ —É–∫–∞–∑–∞—Ç–µ–ª—è:
    - slow (–¥–≤–∏–∂–µ—Ç—Å—è –Ω–∞ 1 —à–∞–≥)
    - fast (–¥–≤–∏–∂–µ—Ç—Å—è –Ω–∞ 2 —à–∞–≥–∞)
- –ï—Å–ª–∏ –≤ —Å–ø–∏—Å–∫–µ –µ—Å—Ç—å —Ü–∏–∫–ª ‚Äî –æ–Ω–∏ –≤—Å—Ç—Ä–µ—Ç—è—Ç—Å—è.
- –ï—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è ‚Äî —Ü–∏–∫–ª–∞ –Ω–µ—Ç.
"""

def has_cycle(head):
    slow = head # –ú–µ–¥–ª–µ–Ω–Ω—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å
    fast = head # –ë—ã—Å—Ç—Ä—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å

    while fast and fast.next:
        slow = slow.next          # –ú–µ–¥–ª–µ–Ω–Ω—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å –∏–¥–µ—Ç –Ω–∞ 1 —à–∞–≥
        fast = fast.next.next     # –ë—ã—Å—Ç—Ä—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å –∏–¥–µ—Ç –Ω–∞ 2 —à–∞–≥–∞

        if slow == fast: # –ï—Å–ª–∏ —É–∫–∞–∑–∞—Ç–µ–ª–∏ –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏—Å—å, —Ü–∏–∫–ª –µ—Å—Ç—å
            return True  # —Ü–∏–∫–ª –Ω–∞–π–¥–µ–Ω

    return False  # –ï—Å–ª–∏ –±—ã—Å—Ç—Ä—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å –¥–æ—Å—Ç–∏–≥ –∫–æ–Ω—Ü–∞ —Å–ø–∏—Å–∫–∞, —Ü–∏–∫–ª–∞ –Ω–µ—Ç


if __name__ == "__main__":
    # –°–æ–∑–¥–∞–µ–º —É–∑–ª—ã
    a = Node("3")
    b = Node("2")
    c = Node("0")
    d = Node("-4")

    # –°–≤—è–∑—ã–≤–∞–µ–º –∏—Ö: 3 ‚Üí 2 ‚Üí 0 ‚Üí -4 ‚Üí None
    a.next = b
    b.next = c
    c.next = d

    # print(c.next)

    print("–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–∏—Å–∫–∞ –±–µ–∑ —Ü–∏–∫–ª–∞:")
    print("–†–µ–∑—É–ª—å—Ç–∞—Ç:", has_cycle(a))
    print()

    current = a
    while current:
        print(current.value)
        current = current.next

    # –î–æ–±–∞–≤–∏–º —Ü–∏–∫–ª: -4 ‚Üí 2
    d.next = b
    # print(d.next)

    print("–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–∏—Å–∫–∞ —Å —Ü–∏–∫–ª–æ–º:")
    print("–†–µ–∑—É–ª—å—Ç–∞—Ç:", has_cycle(a))

    current = a
    while current:
        print(current.value)
        current = current.next  # ‚Üê –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å—Ç–∞–Ω–µ—Ç None

''' 
–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã:
–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–≤–∞ —É–∫–∞–∑–∞—Ç–µ–ª—è:

slow (–º–µ–¥–ª–µ–Ω–Ω—ã–π) ‚Äî –¥–≤–∏–∂–µ—Ç—Å—è –Ω–∞ 1 —à–∞–≥ –∑–∞ –∏—Ç–µ—Ä–∞—Ü–∏—é.
fast (–±—ã—Å—Ç—Ä—ã–π) ‚Äî –¥–≤–∏–∂–µ—Ç—Å—è –Ω–∞ 2 —à–∞–≥–∞ –∑–∞ –∏—Ç–µ—Ä–∞—Ü–∏—é.

–û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–∏–Ω—Ü–∏–ø:

–ï—Å–ª–∏ –≤ —Å–ø–∏—Å–∫–µ –µ—Å—Ç—å —Ü–∏–∫–ª, —Ç–æ –≤ –∫–∞–∫–æ–π-—Ç–æ –º–æ–º–µ–Ω—Ç fast –∏ slow –≤—Å—Ç—Ä–µ—Ç—è—Ç—Å—è —Ç.–µ. –æ–∫–∞–∂—É—Ç—Å—è –Ω–∞ –æ–¥–Ω–æ–º —É–∑–ª–µ.
–ï—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –ª–∏–Ω–µ–π–Ω—ã–π (–±–µ–∑ —Ü–∏–∫–ª–∞), fast –¥–æ—Å—Ç–∏–≥–Ω–µ—Ç –∫–æ–Ω—Ü–∞ (None), —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ü–∏–∫–ª–∞.

–ü–æ—à–∞–≥–æ–≤—ã–π —Ä–∞–∑–±–æ—Ä
–ù–∞—á–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è:

slow –∏ fast —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –≥–æ–ª–æ–≤—É —Å–ø–∏—Å–∫–∞.

–î–≤–∏–≥–∞–µ–º —É–∫–∞–∑–∞—Ç–µ–ª–∏:

slow = slow.next

fast = fast.next.next

–ü—Ä–æ–≤–µ—Ä—è–µ–º:
–ï—Å–ª–∏ slow == fast ‚Üí –µ—Å—Ç—å —Ü–∏–∫–ª.
–ï—Å–ª–∏ fast –∏–ª–∏ fast.next —Å—Ç–∞–ª–∏ None ‚Üí —Ü–∏–∫–ª–∞ –Ω–µ—Ç.

–ü–æ—á–µ–º—É —Å–ª–æ–∂–Ω–æ—Å—Ç—å ùëÇ(ùëõ)?

–í —Ö—É–¥—à–µ–º —Å–ª—É—á–∞–µ slow –ø—Ä–æ—Ö–æ–¥–∏—Ç –≤—Å–µ —É–∑–ª—ã (n —à–∞–≥–æ–≤), fast —Ç–æ–∂–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –º–∞–∫—Å–∏–º—É–º n —à–∞–≥–æ–≤.
–ù–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤ ‚Äî —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø—Ä–æ—Ö–æ–¥, –ø–æ—ç—Ç–æ–º—É —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ª–∏–Ω–µ–π–Ω–∞—è.

–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã
–ë–µ–∑ —Ü–∏–∫–ª–∞: 3 ‚Üí 2 ‚Üí 0 ‚Üí -4 ‚Üí None
fast –¥–æ–±–µ—Ä–µ—Ç—Å—è –¥–æ None, –∑–Ω–∞—á–∏—Ç, —Ü–∏–∫–ª–∞ –Ω–µ—Ç.
–° —Ü–∏–∫–ª–æ–º: 3 ‚Üí 2 ‚Üí 0 ‚Üí -4 ‚Üë ‚Üì ‚Üê ‚Üê ‚Üê
fast —Ä–∞–Ω–æ –∏–ª–∏ –ø–æ–∑–¥–Ω–æ –¥–æ–≥–æ–Ω–∏—Ç slow, –∑–Ω–∞—á–∏—Ç, —Ü–∏–∫–ª –Ω–∞–π–¥–µ–Ω.
'''